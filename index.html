<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H5 2D 游戏</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div id="ui-layer">
        <!-- Notification Container -->
        <div id="notification-container"></div>

        <!-- Pause Button (Visible during gameplay) -->
        <button id="pause-btn" class="hidden" style="position: absolute; top: 20px; right: 20px; z-index: 20;">暂停</button>

        <div id="start-screen" class="screen">
            <div class="lobby-container">
                <div class="lobby-left">
                    <h1>H5 2D 游戏</h1>
                    <div id="gold-display">金币: 0</div>
                    <div id="reiki-display">灵气: 0</div>
                    <button id="start-btn">开始游戏</button>
                    <button id="upgrade-btn" style="background-color: #9C27B0;">修炼</button>
                    <button id="weapon-btn" style="background-color: #FF5722;">武器库</button>
                </div>
                <div class="lobby-right">
                    <!-- Player preview will be drawn on canvas behind here -->
                    <h2>玩家状态</h2>
                    <div id="player-stats-display" style="text-align: left; margin-top: 20px; padding: 0 20px;">
                        <p>生命: <span id="stat-hp">0</span></p>
                        <p>攻击: <span id="stat-damage">0</span></p>
                        <p>防御: <span id="stat-defense">0</span></p>
                        <p>速度: <span id="stat-speed">0</span></p>
                    </div>
                </div>
            </div>
        </div>
        <div id="game-over-screen" class="screen hidden">
            <h1>游戏结束</h1>
            <p id="loss-gold-display" style="color: #ff4444; font-size: 24px; margin: 20px 0;">损失金币: 0</p>
            <button id="restart-btn">重新开始</button>
            <button id="lobby-btn">返回大厅</button>
        </div>
        <div id="victory-screen" class="screen hidden">
            <h1>胜利！</h1>
            <p id="win-gold-display" style="color: gold; font-size: 24px; margin: 20px 0;">获得金币: 0</p>
            <button id="continue-btn">继续游戏</button>
            <button id="victory-lobby-btn">返回大厅</button>
        </div>
        
        <div id="upgrade-screen" class="screen hidden">
            <h1>修炼</h1>
            <div id="cultivation-reiki-display" style="color: #00ffff; font-size: 20px; margin-bottom: 15px;">当前灵气: 0</div>
            <div class="cultivation-container">
                <div class="cultivation-tabs">
                    <button class="tab-btn active" data-tab="mortal">凡人</button>
                    <button class="tab-btn" data-tab="body-refining">锻体</button>
                    <button class="tab-btn" data-tab="qi-refining">练气</button>
                    <button class="tab-btn" data-tab="foundation">筑基</button>
                    <button class="tab-btn" data-tab="golden-core">金丹</button>
                    <button class="tab-btn" data-tab="nascent-soul">元婴</button>
                    <button class="tab-btn" data-tab="soul-formation">化神</button>
                    <button class="tab-btn" data-tab="tribulation">渡劫</button>
                    <button class="tab-btn" data-tab="mahayana">大乘</button>
                </div>
                <div class="cultivation-content">
                    <div id="content-mortal" class="tab-content">
                        <div id="mortal-process">
                            <h2>凡人阶段</h2>
                            <p>肉体凡胎，未入仙途。</p>
                            <p>需消耗 20 灵气感应天地，方可踏入修炼之路。</p>
                            <button id="btn-breakthrough-mortal" style="background-color: #FF9800; margin-top: 20px;">感应天地 (消耗: 20 灵气)</button>
                        </div>
                        <div id="mortal-completed" class="hidden">
                            <h2>凡人阶段</h2>
                            <p>您已踏入仙人之路。</p>
                        </div>
                    </div>
                    <div id="content-body-refining" class="tab-content hidden">锻体内容 (空)</div>
                    <div id="content-qi-refining" class="tab-content hidden">练气内容 (空)</div>
                    <div id="content-foundation" class="tab-content hidden">筑基内容 (空)</div>
                    <div id="content-golden-core" class="tab-content hidden">金丹内容 (空)</div>
                    <div id="content-nascent-soul" class="tab-content hidden">元婴内容 (空)</div>
                    <div id="content-soul-formation" class="tab-content hidden">化神内容 (空)</div>
                    <div id="content-tribulation" class="tab-content hidden">渡劫内容 (空)</div>
                    <div id="content-mahayana" class="tab-content hidden">大乘内容 (空)</div>
                </div>
            </div>
            <button id="btn-back-lobby" style="margin-top: 30px; background-color: #607D8B;">返回大厅</button>
        </div>

        <div id="weapon-screen" class="screen hidden">
            <h1>武器库</h1>
            <div id="weapon-list" class="upgrade-container">
                <!-- Weapons will be injected here -->
            </div>
            <button id="btn-weapon-back-lobby" style="margin-top: 30px; background-color: #607D8B;">返回大厅</button>
        </div>

        <div id="pause-screen" class="screen hidden" style="background: rgba(0,0,0,0.5);">
            <h1>暂停</h1>
            <button id="resume-btn">继续游戏</button>
            <button id="quit-lobby-btn" style="background-color: #f44336;">退出到大厅</button>
        </div>

        <div id="confirm-quit-modal" class="screen hidden" style="background: rgba(0,0,0,0.8); z-index: 30;">
            <div style="background: #333; padding: 30px; border-radius: 10px; text-align: center; border: 1px solid #555;">
                <h2>确认退出?</h2>
                <p style="color: #ff4444; margin: 20px 0;">退出将损失本局获得的所有金币!</p>
                <div style="display: flex; justify-content: center; gap: 20px;">
                    <button id="confirm-quit-yes" style="background-color: #f44336;">确认退出</button>
                    <button id="confirm-quit-no" style="background-color: #607D8B;">取消</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/main.js"></script>
</body>
</html>