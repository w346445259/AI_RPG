<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H5 2D 游戏</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div id="ui-layer">
        <!-- Pause Button (Visible during gameplay) -->
        <button id="pause-btn" class="hidden" style="position: absolute; top: 20px; right: 20px; z-index: 20;">暂停</button>

        <div id="start-screen" class="screen">
            <div class="lobby-container">
                <div class="lobby-left">
                    <h1>H5 2D 游戏</h1>
                    <div id="gold-display">金币: 0</div>
                    <button id="start-btn">开始游戏</button>
                    <button id="upgrade-btn" style="background-color: #9C27B0;">强化</button>
                    <button id="weapon-btn" style="background-color: #FF5722;">武器库</button>
                </div>
                <div class="lobby-right">
                    <!-- Player preview will be drawn on canvas behind here -->
                    <h2>玩家状态</h2>
                </div>
            </div>
        </div>
        <div id="game-over-screen" class="screen hidden">
            <h1>游戏结束</h1>
            <p id="loss-gold-display" style="color: #ff4444; font-size: 24px; margin: 20px 0;">损失金币: 0</p>
            <button id="restart-btn">重新开始</button>
            <button id="lobby-btn">返回大厅</button>
        </div>
        <div id="victory-screen" class="screen hidden">
            <h1>胜利！</h1>
            <p id="win-gold-display" style="color: gold; font-size: 24px; margin: 20px 0;">获得金币: 0</p>
            <button id="continue-btn">继续游戏</button>
            <button id="victory-lobby-btn">返回大厅</button>
        </div>
        
        <div id="upgrade-screen" class="screen hidden">
            <h1>强化 (养成)</h1>
            <div id="upgrade-gold-display" style="color: gold; font-size: 24px; margin-bottom: 20px; font-weight: bold;">金币: 0</div>
            <div class="upgrade-container">
                <div class="upgrade-item">
                    <h2>攻击力</h2>
                    <p>等级: <span id="atk-level">0</span>/10</p>
                    <p>伤害: <span id="atk-val">1</span> <span class="arrow">-></span> <span id="atk-next">2</span></p>
                    <button id="btn-upgrade-atk">升级 (消耗: <span id="atk-cost">1</span>)</button>
                </div>
                <div class="upgrade-item">
                    <h2>生命值</h2>
                    <p>等级: <span id="hp-level">0</span>/10</p>
                    <p>最大生命: <span id="hp-val">10</span> <span class="arrow">-></span> <span id="hp-next">12</span></p>
                    <button id="btn-upgrade-hp">升级 (消耗: <span id="hp-cost">1</span>)</button>
                </div>
            </div>
            <button id="btn-back-lobby" style="margin-top: 30px; background-color: #607D8B;">返回大厅</button>
        </div>

        <div id="weapon-screen" class="screen hidden">
            <h1>武器库</h1>
            <div id="weapon-list" class="upgrade-container">
                <!-- Weapons will be injected here -->
            </div>
            <button id="btn-weapon-back-lobby" style="margin-top: 30px; background-color: #607D8B;">返回大厅</button>
        </div>

        <div id="pause-screen" class="screen hidden" style="background: rgba(0,0,0,0.5);">
            <h1>暂停</h1>
            <button id="resume-btn">继续游戏</button>
            <button id="quit-lobby-btn" style="background-color: #f44336;">退出到大厅</button>
        </div>

        <div id="confirm-quit-modal" class="screen hidden" style="background: rgba(0,0,0,0.8); z-index: 30;">
            <div style="background: #333; padding: 30px; border-radius: 10px; text-align: center; border: 1px solid #555;">
                <h2>确认退出?</h2>
                <p style="color: #ff4444; margin: 20px 0;">退出将损失本局获得的所有金币!</p>
                <div style="display: flex; justify-content: center; gap: 20px;">
                    <button id="confirm-quit-yes" style="background-color: #f44336;">确认退出</button>
                    <button id="confirm-quit-no" style="background-color: #607D8B;">取消</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/main.js"></script>
</body>
</html>