# 功法系统说明 v2.0

## 功能概述
功法系统是修仙游戏的核心玩法之一，玩家可以通过修炼功法来提升境界并获得强大的属性加成。

## 解锁条件
- 达到**锻体圆满**（锻体期9阶）后，大厅会出现"功法"按钮

## 功法等级体系

### 黄阶功法（5种）
- **可修炼境界**：练气期圆满
- **消耗灵气**：100/次
- **功法列表**：
  1. **基础吐纳术** 📜 - 平衡发展（力量+5，敏捷+5，体魄+5）
  2. **烈焰心法** 🔥 - 火属性攻击（力量+15，暴击伤害+0.2）
  3. **疾风身法** 💨 - 风属性速度（敏捷+15，暴击率+5%）
  4. **金刚体** 🛡️ - 防御型（体魄+20，防御+10）
  5. **悟道心经** 📿 - 辅助型（悟性+10，修炼速度+10%）

### 玄阶功法（6种）
- **可修炼境界**：金丹期
- **消耗灵气**：500/次
- **功法列表**：
  1. **玄元心法** 📘 - 全面提升（力量+20，敏捷+20，体魄+20，灵力+10）
  2. **九阳神功** ☀️ - 至阳至刚（力量+50，暴击伤害+0.5，体魄+20）
  3. **凌波微步** 🌊 - 身法绝学（敏捷+50，暴击率+10%，防御+15）
  4. **不灭金身** 🏛️ - 防御至上（体魄+60，防御+30）
  5. **太上忘情诀** 🧘 - 悟道功法（悟性+30，灵力+25，修炼速度+20%，灵气回复+15%）
  6. **雷霆万钧诀** ⚡ - 雷属性（力量+30，敏捷+30，暴击率+8%，暴击伤害+0.3）

### 地阶功法（7种）
- **可修炼境界**：化神期
- **消耗灵气**：2000/次
- **功法列表**：
  1. **地煞真经** 📕 - 全面大幅提升（力量+60，敏捷+60，体魄+60，灵力+30，悟性+20）
  2. **焚天煮海诀** 🌋 - 极致攻击（力量+150，暴击伤害+1.0，灵力+40）
  3. **鲲鹏逍遥游** 🦅 - 速度极致（敏捷+150，暴击率+20%，防御+40）
  4. **混沌不灭体** 🗿 - 近乎不死（体魄+180，防御+80，力量+40）
  5. **天机造化诀** 🔮 - 悟道至高（悟性+80，灵力+70，修炼速度+40%，灵气回复+30%）
  6. **阴阳无极功** ☯️ - 攻防兼备（力量+80，敏捷+80，体魄+80，暴击率+12%，暴击伤害+0.6）
  7. **星辰炼体诀** ⭐ - 星辰之力（力量+70，敏捷+70，体魄+100，灵力+50）

### 天阶功法（8种）
- **可修炼境界**：大乘期
- **消耗灵气**：10000/次
- **功法列表**：
  1. **天罡神诀** 📗 - 全属性巨幅提升（力量+150，敏捷+150，体魄+150，灵力+80，悟性+50，防御+50）
  2. **帝炎焚世诀** 🔥 - 毁天灭地（力量+400，暴击伤害+2.0，灵力+100）
  3. **虚空遁形术** 🌌 - 穿梭虚空（敏捷+400，暴击率+35%，防御+100）
  4. **盘古真身** ⛰️ - 开天辟地（体魄+500，防御+200，力量+150）
  5. **鸿蒙造化经** 🌟 - 造化万物（悟性+200，灵力+180，修炼速度+80%，灵气回复+60%）
  6. **太极混元功** ⚫ - 完美平衡（力量+200，敏捷+200，体魄+200，暴击率+25%，暴击伤害+1.5，防御+80）
  7. **万法归宗** ✨ - 万法归一（灵力+250，悟性+150，修炼速度+60%，灵气回复+50%，暴击率+15%）
  8. **神魔霸体诀** 👹 - 神魔之力（力量+250，体魄+250，防御+120，暴击伤害+1.2）

## 功法加成类型

### 战斗属性加成
- **力量**：提升攻击力
- **敏捷**：提升攻击速度
- **体魄**：提升生命值和生命回复
- **防御**：减少受到的伤害
- **灵力**：提升法力值和法力回复
- **暴击率**：提升暴击触发概率
- **暴击伤害**：提升暴击时的伤害倍数

### 修炼属性加成
- **悟性**：提升修炼成功率和灵气获取速度
- **修炼速度**：直接提升功法修炼成功率
- **灵气回复**：提升打坐时的灵气获取速度

## 修炼机制

### 成功率计算
```
基础成功率 = 10%
悟性加成 = 基础成功率 × (悟性 / 10)
修炼速度加成 = 悟性加成 × (1 + 修炼速度加成)
最终成功率 = min(100%, 修炼速度加成)
```

**示例**：
- 10点悟性，无修炼速度加成 → 10%成功率
- 50点悟性，无修炼速度加成 → 50%成功率
- 50点悟性，+20%修炼速度 → 60%成功率
- 100点悟性，+80%修炼速度 → 100%成功率（必定成功）

### 灵气获取计算
```
基础灵气获取 = 悟性 × 0.1 /秒
灵气回复加成 = 基础灵气获取 × (1 + 灵气回复加成)
聚灵阵加成 = 灵气回复加成 × 阵法倍数
```

**示例**：
- 100点悟性，无加成 → 10灵气/秒
- 100点悟性，+30%灵气回复 → 13灵气/秒
- 100点悟性，+60%灵气回复，2倍聚灵阵 → 32灵气/秒

## 功法等级限制

### 重要规则
1. **不可重修**：选择修炼某个阶位的功法后，无法再选择同阶或更低阶的功法
2. **只能升级**：只能选择比已修炼过的最高阶位更高的功法
3. **慎重选择**：每个阶位只能选择一次，请根据自己的需求选择合适的功法

### 示例
- 修炼过黄阶功法后 → 只能选择玄阶、地阶、天阶功法
- 修炼过玄阶功法后 → 只能选择地阶、天阶功法
- 修炼过地阶功法后 → 只能选择天阶功法
- 修炼过天阶功法后 → 无法再选择其他功法

## 功法选择建议

### 攻击流派
- **黄阶**：烈焰心法（力量+暴击伤害）
- **玄阶**：九阳神功（高力量+高暴击伤害）
- **地阶**：焚天煮海诀（极致力量+极致暴击）
- **天阶**：帝炎焚世诀（毁天灭地的力量）

### 速度流派
- **黄阶**：疾风身法（敏捷+暴击率）
- **玄阶**：凌波微步（高敏捷+高暴击率）
- **地阶**：鲲鹏逍遥游（极致敏捷+极致暴击率）
- **天阶**：虚空遁形术（穿梭虚空的速度）

### 防御流派
- **黄阶**：金刚体（体魄+防御）
- **玄阶**：不灭金身（高体魄+高防御）
- **地阶**：混沌不灭体（近乎不死之身）
- **天阶**：盘古真身（开天辟地的防御）

### 修炼流派
- **黄阶**：悟道心经（悟性+修炼速度）
- **玄阶**：太上忘情诀（悟性+灵力+修炼速度+灵气回复）
- **地阶**：天机造化诀（高悟性+高修炼速度+高灵气回复）
- **天阶**：鸿蒙造化经（造化万物，修炼至高境界）

### 平衡流派
- **黄阶**：基础吐纳术（平衡发展）
- **玄阶**：玄元心法或雷霆万钧诀（全面提升）
- **地阶**：阴阳无极功或地煞真经（攻防兼备）
- **天阶**：太极混元功或天罡神诀（完美平衡）

## 使用建议

1. **初期**：选择黄阶功法，消耗较低，快速积累经验
2. **中期**：根据战斗风格选择玄阶功法，开始专精某个方向
3. **后期**：选择地阶功法，大幅提升战斗力
4. **终极**：选择天阶功法，达到修炼巅峰

5. **修炼流派优势**：
   - 前期选择修炼流派功法可以大幅提升修炼效率
   - 灵气获取速度快，可以更快突破境界
   - 后期可以转向战斗流派功法

6. **战斗流派优势**：
   - 直接提升战斗力，更容易通关关卡
   - 获取更多资源，加速整体发展
   - 适合喜欢战斗的玩家

7. **功法切换时机**：
   - 当前功法达到修炼上限时
   - 积累足够灵气可以修炼更高阶功法时
   - 想要改变发展方向时（但注意不能降阶）
